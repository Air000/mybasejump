<!DOCTYPE html>

<html>
    <head>
        <title>
            File Metadata Microservice
        </title>
        <link href="/public/css/upload.css" rel="stylesheet" type="text/css">
    </head>    
    <body>
        <h1>
            File Metadata Microservice
        </h1>
        <div>
            <form id="uploadForm" method="post" enctype="multipart/form-data">
                Select file to upload:
                <input type="file" name="the-file" id="uploadFile"/>
                <input type="submit" value="Upload" name="submit">
            </form>  
        </div>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                
    			$('form').on('submit', function(event) {

    				event.stopPropagation();
    				event.preventDefault();
                    
    				var data =new FormData($('#uploadForm')[0]);
    				
    				$.ajax({
    					url: window.location.origin + '/api/fileanalyse/',
    					type: 'POST',
    					data: data,
    					cache: false,
    					processData: false,
    					contentType: false,
    					error: function(jqXHR, textStatus, errorThrown) {
    						alert('ERRORS: ' + textStatus);
    					},
    					success: function(data) {
    						//alert('FILE SIZE: ' + data.fileSize);
    						alert(data);
    					}
    				});
    			});
            });
        </script>
    </body>    
</html>    